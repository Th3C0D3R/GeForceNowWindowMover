version: 0.0.{build}
pull_requests:
  do_not_increment_build_number: true
branches:
  only:
  - main
skip_tags: true
image: Visual Studio 2022
configuration: Release
platform: x64
build:
  project: GeForceNowWindowMover.csproj
  verbosity: normal
after_build:
- cmd: 7z a GFN_WindowMover.zip %APPVEYOR_BUILD_FOLDER%\Release\*.exe %APPVEYOR_BUILD_FOLDER%\Release\*.exe.config
artifacts:
- path: GFN_WindowMover.zip
  name: deploy
assembly_info:
  patch: true
  file: AssemblyInfo.*
  assembly_version: "0.0.{build}"
  assembly_file_version: "{version}"
  assembly_informational_version: "{version}"
deploy:
- provider: GitHub
  tag: v$(appveyor_build_version)
  release: GFNWindowMover-v$(appveyor_build_version)
  description: $(APPVEYOR_REPO_COMMIT_MESSAGE)\n$(APPVEYOR_REPO_COMMIT_MESSAGE_EXTENDED)
  auth_token:
    secure: sk/FtVXDOUNUDwskevXe2FV8XKYzOmYCS5uML4ElDyNnzZV+hNdmGfD3GgElog5WuZF2mCB8Afs2bI4fyfjxSz6kAgzCXQzG5tep1zuo0nE=
  artifact: deploy
  draft: false
  prerelease: false
  force_update: true
  on:
    branch: main
skip_commits:
  files:
  - '*.md'
  - '*.png'
  - LICENSE
  - '.gitignore'
  - 'App.config'
  - 'appveyor.yml'
